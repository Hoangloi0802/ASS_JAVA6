<header id="header" class="header d-flex align-items-center sticky-top">
  <div class="container position-relative d-flex align-items-center justify-content-between">
    <a href="index.html" class="logo d-flex align-items-center me-auto me-xl-0">
      <h1 class="sitename fs-3">Shop AOT</h1>
    </a>

    <nav id="navmenu" class="navmenu">
      <ul class="fs-5">
        <li><a href="/" class="active">TRANG CH·ª¶</a></li>
        <li><a href="/shop">S·∫¢N PH·∫®M</a></li>
      </ul>
      <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </nav>

    <div class="header-social-links d-flex align-items-center">
      <div class="input-wrapper me-3">
        <button class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="#fff" stroke-width="2">
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
        </button>
        <input type="text" name="text" class="input" placeholder="T√™n s·∫£n ph·∫©m" />
      </div>

      <!-- Icon gi·ªè h√†ng -->
      <a href="/giohang" class="position-relative me-3">
        <i class="bi bi-cart fs-4"></i>
        <span class="position-absolute bg-danger rounded-circle text-white px-2"
          style="top: -5px; left: 15px; height: 20px; min-width: 20px; font-size: 12px; line-height: 20px;">
          0
        </span>
      </a>

      <!-- Dropdown ng∆∞·ªùi d√πng -->
      <div class="nav-item dropdown">
        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button"
          data-bs-toggle="dropdown" aria-expanded="false">
          <!-- Hi·ªÉn th·ªã icon n·∫øu ch∆∞a ƒëƒÉng nh·∫≠p, ·∫£nh n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p -->
          <th:block th:if="${session.currentUser == null}">
            <i class="bi bi-person fs-4"></i>
          </th:block>
          <th:block th:if="${session.currentUser != null}">
            <img th:src="'/img/' + ${session.currentUser.photo}" class="rounded-circle"
                 style="width: 30px; height: 30px; object-fit: cover;" alt="Avatar">
          </th:block>
        </a>

        <ul class="dropdown-menu dropdown-menu-end shadow-sm" aria-labelledby="userDropdown">
          <!-- Ch∆∞a ƒëƒÉng nh·∫≠p -->
          <th:block th:if="${session.currentUser == null}">
            <li><a class="dropdown-item" href="/Dangnhap">ƒêƒÉng nh·∫≠p</a></li>
            <li><a class="dropdown-item" href="/Dangky">ƒêƒÉng k√Ω</a></li>
            <li><a class="dropdown-item" href="/forgot-password">Qu√™n m·∫≠t kh·∫©u</a></li>
          </th:block>

          <!-- ƒê√£ ƒëƒÉng nh·∫≠p -->
          <th:block th:if="${session.currentUser != null}">
            <li><a class="dropdown-item" href="/profile" th:text="${session.currentUser.fullname}">T√™n ng∆∞·ªùi d√πng</a></li>
            <li><a class="dropdown-item" href="/donhang">ƒê∆°n h√†ng c·ªßa b·∫°n</a></li>
            <li><a class="dropdown-item" href="/doimk">ƒê·ªïi m·∫≠t kh·∫©u</a></li>

            <!-- Ch·ªâ hi·ªán n·∫øu l√† admin -->
            <th:block sec:authorize="hasAuthority('ROLE_ADMIN')">
              <li><a class="dropdown-item" href="/admin/products">üîß Qu·∫£n l√Ω</a></li>
            </th:block>

            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" > <form th:action="@{/logout}" method="post">
              <button class="dropdown-item" type="submit">üö™ ƒêƒÉng xu·∫•t</button>
          </form></a></li>
          </th:block>
        </ul>
      </div>
    </div>
  </div>
</header>
